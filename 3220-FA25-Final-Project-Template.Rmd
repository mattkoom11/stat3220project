---
title: "NBA Salaries: How Much is that Buzzer Beater Worth?"
author: "Eddie and Co."
fontsize: 12pt
output:
  pdf_document: default
  html_document:
    df_print: paged
urlcolor: black
geometry: margin=1in
header-includes:
  - \usepackage{setspace}
  - \onehalfspacing
---


```{r, echo=FALSE, out.width="60%", fig.align="center"}
knitr::include_graphics("images/stephen-curry-nba.png")

```


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, highlight=FALSE, comment=NA, warnings=FALSE,message=FALSE)
```

```{r, echo=FALSE, warning=FALSE,results=FALSE}
## Use this chunk for reading in packages.
## Use this chunk for reading in the data, combining the data, and any other major data cleaning that is not relevant to show.
## Remove the ## before all code.

library(ggplot2)
library(dplyr)
library(car)
library(reshape2)

df <- read.csv("main.csv")
df <- na.omit(df)
head(df)

#\includegraphics{/Users/kristavaranyak/Downloads/GOLDyulo.jpg}
#above was causing problems with knitting, originally line 38
```



\begin{center}

\end{center}


\newpage

## Introduction
NBA salaries reflect the combined effects of player performance, recognition, and team strategy. Prior research shows that compensation is strongly tied to measurable statistics and awards-based reputation (Berri & Schmidt, 2006; Stiroh, 2007; Simmons & Berri, 2011). Our project examines which factors best explain salary variation in the 2024–2025 season, focusing on three dimensions of player value: scoring (PTS), defensive activity (stocks), and award recognition. These variables represent offensive production, defensive impact, and league-wide acknowledgment—each commonly cited in contract evaluations

Our general research question is:

\textbf{What factors from the 2024-2025 season best explain variation in future salaries (2025-2026 onwards)?}

To address this, we developed three specific research questions:

\begin{itemize}
  \item Do NBA players who score more points (PTS) earn higher salaries on average?
  \item Is there a meaningful positive relationship between a player’s defensive activity (“stocks”) and their salary?
  \item Do players who have earned at least one major NBA award receive higher salaries compared to players with no awards?
\end{itemize}

These questions allow us to assess how performance and recognition jointly relate to compensation and how our findings compare with established sports-economics patterns.

## Data Summary
### Data Sources
Our original dataset included all NBA players who appeared during the 2024–2025 season, combining salary, performance, demographic, and award information. However, to stabilize variance and reduce right skew in the response variable, we restricted the dataset to players averaging more than 20 minutes per game and applied a square-root transformation to salary (sqrt(Salary + 1)). The transformed distribution is noticeably more symmetric and appropriate for linear modeling. Player statistics and awards were sourced from Basketball Reference, while Statista provided team franchise values to add economic context. Player names were standardized, awards was simplified into a three-level categorical variable, and age was grouped into brackets.

### Exploratory Data Analysis

```{r, echo=FALSE,warning=FALSE, fig.width=16, fig.height=20}
library(patchwork)

df <- df[df$MP > 20, ]
df$log_salary <- log(df$avg_salary_millions + 1)

p1 <- ggplot(df, aes(x = log_salary)) +
  geom_histogram(binwidth = 0.25, fill = "blue", color = "black") +
  labs(title = "Distribution of Log-transformed Salaries",
       x = "log(Salary + 1)", y = "Count") +
  theme_minimal()

p2_salary_vs_pts <- ggplot(df, aes(x = PTS, y = log_salary)) +
  geom_point(alpha = 0.6) +
  geom_smooth(method = "lm", se = FALSE) +
  labs(title = "Log-transformed Salaries vs Points Per Game",
       x = "Points per game", y = "log(Salary + 1)") +
  theme_minimal()

p3_salary_vs_stocks <- ggplot(df, aes(x = stocks, y = log_salary)) +
  geom_point(alpha = 0.6) +
  geom_smooth(method = "lm", se = FALSE) +
  labs(title = "Log-transformed Salaries vs Defensive Stocks (Steals + Blocks)",
       x = "Stocks (steals + blocks)", 
       y = "log(Salary + 1)") +
  theme_minimal()

p4_salary_by_awards <- ggplot(df, aes(x = Awards, y = log_salary)) +
  geom_boxplot(fill = "grey85") +
  labs(title = "Log-transformed Salaries by Awards Category",
       x = "Awards Category", y = "log(Salary + 1)") +
  theme_minimal()

p6_salary_by_age <- ggplot(df, aes(x = Age, y = log_salary)) +
  geom_boxplot(fill = "lightgray") +
  labs(title = "Log-transformed Salaries by Age Group",
       x = "Age Group", y = "log(Salary + 1)") +
  theme_minimal()

# Combine in 3x2 grid
(p1 | p2_salary_vs_pts) / 
  (p3_salary_vs_stocks | p4_salary_by_awards) / 
  (p6_salary_by_age | plot_spacer())
```

### EDA Summary
The square-root–transformed salary variable is suitable for regression: its distribution is more symmetric and shows clearer linear relationships with key predictors. Higher scorers ($\approx$ 20+ PPG) consistently fall in the upper salary range, while low scorers cluster near the bottom. Defensive impact (stocks) has a weaker but positive trend. Awards and age also matter—players with awards and those in the 27–34 age range show higher median salaries, while younger players have wider variation due to rookie contracts.

\textbf{Assessing Multicollinearity}

For multicollinearity, we used correlations and VIFs to evaluate overlap among predictors, especially between PTS, FTA, and MP. When VIFs exceeded standard thresholds, we applied variable screening and stepwise selection to reduce the model and reassessed VIFs before final model building.
```{r, echo=FALSE, warning=FALSE,results=FALSE}
## Use this code chunk can be used to execute any functions or summaries 
## that will not be included in your output such as correlations or 5 number summaries

```

## Methods and Analysis

```{r, echo=FALSE, warning=FALSE,results=FALSE}
## This code chunk can be used to execute any functions or summaries that will not be included in your output

```

\textbf{Building the Model}

We began by building our model by estimating our model parameters, starting with only our quantitative predictors and a quantitative interaction term that we believe may contribute to the model. Our initial model using quantitative predictors is as follows: 

\[
\begin{aligned}
\log(\text{Salary}) &= \beta_0 + \beta_1 PTS + \beta_2 MP + \beta_3 PFG\_\%TS + \beta_4 FTA + \beta_5 TRB \\
              &\quad + \beta_6 AST + \beta_7 \text{Stocks} + \beta_8 \text{Value} + \beta_9 (PTS \times FTA) \\
\end{aligned}
\]

A Global F-test confirmed the model had predictive value, but VIF analysis revealed severe multicollinearity, especially in the interaction term (VIF $\approx$ 23.4 for PTS×FTA). Because of this, we removed the interaction and refit a model with only main effects.

To determine the most important quantitative variables, we conducted stepwise regression. Stepwise selection chose: PTS, MP, stocks. This produced a simpler quantitative model:

\[
\begin{aligned}
\log(\text{Salary}) &= \beta_0 + \beta_1 PTS + \beta_2 MP + \beta_3 stocks 
\end{aligned}
\]

All three predictors were highly significant and the model achieved Adjusted \(R^2 = 0.5945\)

Next, we incorporated our qualitative predictors: awards (awards_1, awards_2plus), age groups (22-26, 27-31, 32-34, 35+), positions (PF, PG, SF, SG), and one interaction (Awards × Age). Using nested F-tests, we found that age group significantly improved the model, while awards and position did not. Removing non-contributing categorical variables yielded the final model:

\[
\begin{aligned}
\log(\text{Salary}) &= \beta_0 + \beta_1 PTS + \beta_2 MP + \beta_3 stocks + \beta_4 \text{Age 22-26} \\ 
              &\quad + \beta_5 \text{Age 27-31}  + \beta_6 \text{Age 32-34}
\end{aligned}
\]

A final Global F-test confirmed the adequacy and significance of this model.

\textbf{Assessing the Model (Including Cross Validation)}

After finalizing our model through variable testing, we conducted a holistic assessment to understand its strengths and limitations. We evaluated our metrics which had values of Adjusted \(R^2 = 0.6221\) and \(\text{RSE} = 0.530\), and we interpreted confidence and prediction intervals to assess practical performance.

We also incorporated cross-validation to evaluate model reliability. Cross-validation allowed us to check for overfitting or underfitting by training the model on most of the data and testing it on the remainder. Using the Validation Set Approach in R, we randomly split the dataset into 80% training and 20% testing, then evaluated the resulting models using \(\sqrt{MSE}\) and \(R^2\) which came out to be 0.540 and 0.638 respectively. This process helped determine whether the model generalized well to new data or required further refinement.

\textbf{Checking Model Assumptions}

We examined key regression assumptions using residual diagnostics:

Linearity & Homoscedasticity:
Residual–fitted and residual–predictor plots showed no major violations, with only mild non-constant variance.

Normality:
The Q–Q plot displayed slight deviation in the left tail due to a few outliers, but overall residuals were reasonably normal.

Influential Observations:
Cook’s distance, leverage, and studentized residual analyses identified several influential cases (notably observations 154, 161, and 235). These points may warrant further investigation or sensitivity analysis.

Overall, the diagnostics suggest that the assumptions are reasonably met, with only minor departures that do not meaningfully undermine inference.

\newpage

## Results

\textbf{Final Model}

The final model for predicting NBA player average salary (in millions) is:
\[
\begin{aligned}
\text{Salary} &= \beta_0 + \beta_1 PTS + \beta_2 MP + \beta_3 stocks + \beta_4 \text{Age 22-26} \\ 
              &\quad + \beta_5 \text{Age 27-31}  + \beta_6 \text{Age 32-34}
\end{aligned}
\]
The final model achieved: Multiple \(R^2 = 0.6345\), Adjusted \(R^2 = 0.6221\), Residual Standard Error = 0.530  

A Global F-test indicated the model was highly significant: (\(F = 51.21\), \(p < 2.2 \times 10^{-16}\)).

We evaluated generalization using **5-fold cross-validation**, obtaining: RMSE = 0.540, Cross-validated \(R^2 = 0.638\), MAE = 0.440

These results closely matched the in-sample performance, indicating **no evidence of overfitting**.

\textbf{Predictor Significance}

From the final model output:

- **PTS** was the strongest predictor (\(\beta = 0.08228,\ p = 1.03 \times 10^{-12}\))

- **MP** had a significant but smaller positive effect (\(\beta = 0.03258,\ p = 0.0234\))

- **stocks** was also significant (\(\beta = 0.23531,\ p = 0.0018\))

For age groups (relative to the baseline category):

- **Age 27–31**: significant positive effect (\(\beta = 0.39501,\ p = 0.0404\))

- **Age 32–34**: marginally significant (\(\beta = 0.43997,\ p = 0.0512\))

- **Age 22–26**: not significant (\(\beta = 0.08700,\ p = 0.6420\))

Awards and position effects were discarded because they were not statistically useful in improving model fit.

\textbf{Diagnostics}

Influence metrics (Cook’s distance, leverage, and studentized residuals) identified several influential observations—particularly **154**, **161**, and **235**.  
Observations **86** and **154** were marked for potential removal in follow-up sensitivity analysis.

## Conclusions

Our final regression model explains approximately **62%** of the variation in log-salary, showing strong predictive usefulness while maintaining parsimony.  

The most influential predictors were: **Points per game (PTS)** - by far the strongest driver of salary, **Minutes played (MP)** — indicating playing time remains an important valuation metric, **Defensive activity (“stocks”)** — also contributed meaningfully  

Age group effects were also important.  
Players aged **27–31** and **32–34** earned higher salaries than the youngest group, consistent with peak-career performance in the NBA.

Overall, the final model provides a statistically sound and interpretable framework for understanding NBA salary determination.

\textbf{Example Prediction}

Because the final model is fitted on **log-transformed salary**, predictions must be exponentiated back to the original salary scale.

For illustration, consider a player with: **PTS = 24**, **MP = 33**, **stocks = 2.0**, in the **27–31 age group** (indicator = 1), all other age indicators = 0  

Using the final model and evaluating the expression:
\[
\log(\hat{S}) \approx 4.06
\quad\Longrightarrow\quad
\hat{S} = e^{4.06} \approx 58.1
\]
Thus, the predicted **average salary is approximately 58 million dollars**.  
This demonstrates that the model produces intuitive, performance-driven estimates that scale naturally with scoring, playing time, defensive contributions, and peak-career age ranges.

\textbf{Future Improvements}

Although the model performed well overall, several limitations remain:
While the model performed well, several limitations remain. A few observations (154, 161, 235) showed high influence and may affect coefficient stability. Important salary factors not in the dataset—such as contract timing, injuries, reputation, and CBA rules—could improve realism if added. Finally, future modeling could test nonlinear effects, interaction terms, or regularization methods (ridge/lasso) to better capture skewed salaries and correlated predictors. Overall, the model is strong but leaves room for richer extensions.

\newpage

## Appendix A: Data Dictionary
| Variable Name | Abbreviated Name | Description |
|:-------------:|:----------------:|:-----------:|
|Games|G|This represents the games played by each respective player.|
|Minutes Played|MP|This represents the minutes played by each respective player in the overall season.|
|Points Scored|PTS|This represents the total points scored by each respective player.|
|Field Goal Percentage|FG_PCT|This represents the percentage of field goals scored by each respective player.|
|Free Throw Attempts|FTA|This represents the free throw attempts made by each respective player.|
|Total Rebounds|TRB|This represents the total rebounds made by each respective player.|
|Total Assists|AST|This represents the total assits by each respective player.|
|Steals and Blocks Combined|Stocks|This represents the steals and  blocks achieved by each respective player.|
|Franchise Value|Value|This represents the franchise value of the team of each respective player.|
|Position|Pos|This represents the position of the player. The position can either be center (reference), power forward (pf), point guard (pg), small forward (sf), or shooting guard (sg).|
|Awards|awards|This signifies the number of awards a player has won, sorted into three groups: 0 awards (reference), 1 award, or at least 2 awards.|
|Age|Age|This represents the player's age, sorted into 4 groups: 22-26, 27-31, 32-24, and 35+ (reference).|

\newpage

## Appendix B: Data Rows

```{r, echo=FALSE}
# Use head() function to output first several rows
head(df)
```

\newpage

## Appendix C: Final Model Output and Plots

```{r, echo=FALSE, warning=FALSE,results=FALSE}
## This code chunk can be used to execute any functions or summaries that will not be included in your output
```

```{r, echo=FALSE}
## Use this section to output the summary of your final model
## Include the relevant plots from assumptions and your additional techniques
## This should NOT be a dump of all of your plots and outputs.
## Refer to the Rmarkdown guide for sizing information on your plots
final_model <- lm(avg_salary_millions ~ MP + PTS + TRB + AST + Pos_PF + 
    Pos_PG + Pos_SF + Pos_SG, data = df)
summary(final_model)
```

\newpage

## Appendix D: References

### Background

Berri, D. J., & Schmidt, M. B. (2006). The wages of wins. Stanford University Press.

Kubatko, J., Oliver, D., Pelton, K., & Rosenbaum, D. T. (2007).
A starting point for analyzing basketball statistics. Journal of Quantitative Analysis in Sports, 3(3).
https://doi.org/10.2202/1559-0410.1070

NBA. (2023).
Collective Bargaining Agreement: Summary of principal terms.
https://nbpa.com/cba

Simmons, R., & Berri, D. J. (2011). Mixing the princes and the paupers: Pay and performance in the NBA. Labour Economics, 18(3), 381–388. https://doi.org/10.1016/j.labeco.2010.12.003

Staw, B. M., & Hoang, H. (1995).
Sunk costs in the NBA: Why draft order affects playing time and survival in professional basketball. Administrative Science Quarterly, 40(3), 474–494.
https://doi.org/10.2307/2393794

Stiroh, K. (2007). Playing for keeps: Pay and performance in the NBA. Economic Inquiry, 45(1), 145–161. https://doi.org/10.1111/j.1465-7295.2006.00002.x

### Data Sources

Statista (NBA franchise values):
Statista. (2010). Franchise value of National Basketball Association teams in 2010. https://www.statista.com/statistics/193696/franchise-value-of-national-basketball-association-teams-in-2010/

Basketball-Reference (Player contracts):
Basketball-Reference.com. (n.d.). NBA player contracts. https://www.basketball-reference.com/contracts/players.html

Basketball-Reference (2025 Per-game stats):
Basketball-Reference.com. (2025). NBA per game statistics: 2024–25 season. https://www.basketball-reference.com/leagues/NBA_2025_per_game.html

### Additional Help
