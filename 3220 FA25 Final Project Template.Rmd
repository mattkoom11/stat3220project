---
title: 'NBA Salaries: How Much is that Buzzer Beater Worth?'
author: "Eddie and Co."
fontsize: 12pt
output:
  html_document:
    df_print: paged
urlcolor: black
geometry: margin=1in
header-includes:
- \usepackage{setspace}
- \onehalfspacing
---

```{r, echo=FALSE, out.width="60%", fig.align="center"}
knitr::include_graphics("images/stephen-curry-nba.png")

```


```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE, highlight=FALSE, comment=NA, warnings=FALSE,message=FALSE)
```

```{r, echo=FALSE, warning=FALSE,results=FALSE}
## Use this chunk for reading in packages.
## Use this chunk for reading in the data, combining the data, and any other major data cleaning that is not relevant to show.
## Remove the ## before all code.

library(ggplot2)
library(dplyr)
library(car)
library(reshape2)

df <- read.csv("main.csv")
df <- na.omit(df)
head(df)

#\includegraphics{/Users/kristavaranyak/Downloads/GOLDyulo.jpg}
#above was causing problems with knitting, originally line 38
```



\begin{center}

\end{center}


\newpage

## Introduction
NBA salaries reflect the combined effects of player performance, recognition, and team strategy. Prior research shows that compensation is strongly tied to measurable statistics and awards-based reputation (Berri & Schmidt, 2006; Stiroh, 2007; Simmons & Berri, 2011). Our project examines which factors best explain salary variation in the 2024–2025 season, focusing on three dimensions of player value: scoring (PTS), defensive activity (stocks), and award recognition. These variables represent offensive production, defensive impact, and league-wide acknowledgment—each commonly cited in contract evaluations

Our general research question is:

\textbf{What factors from the 2024-2025 season best explain variation in future salaries (2025-2026 onwards)?}

To address this, we developed three specific research questions:

\begin{itemize}
  \item Do NBA players who score more points (PTS) earn higher salaries on average?
  \item Is there a meaningful positive relationship between a player’s defensive activity (“stocks”) and their salary?
  \item Do players who have earned at least one major NBA award receive higher salaries compared to players with no awards?
\end{itemize}

These questions allow us to assess how performance and recognition jointly relate to compensation and how our findings compare with established sports-economics patterns.

## Data Summary
### Data Sources
Our original dataset included all NBA players who appeared during the 2024–2025 season, combining salary, performance, demographic, and award information. However, to stabilize variance and reduce right skew in the response variable, we restricted the dataset to players averaging more than 20 minutes per game and applied a square-root transformation to salary (sqrt(Salary + 1)). The transformed distribution is noticeably more symmetric and appropriate for linear modeling. Player statistics and awards were sourced from Basketball Reference, while Statista provided team franchise values to add economic context. After standardizing player names, we merged all sources so each player occupied one row. Awards were simplified into a three-level categorical variable, and age was grouped into brackets.

### Exploratory Data Analysis

```{r, echo=FALSE,warning=FALSE, fig.width=16, fig.height=20}
library(patchwork)

df <- df[df$MP > 20, ]
df$log_salary <- log(df$avg_salary_millions + 1)

p1 <- ggplot(df, aes(x = log_salary)) +
  geom_histogram(binwidth = 0.25, fill = "blue", color = "black") +
  labs(title = "Distribution of Log-transformed Salaries",
       x = "log(Salary + 1)", y = "Count") +
  theme_minimal()

p2_salary_vs_pts <- ggplot(df, aes(x = PTS, y = log_salary)) +
  geom_point(alpha = 0.6) +
  geom_smooth(method = "lm", se = FALSE) +
  labs(title = "Log-transformed Salaries vs Points Per Game",
       x = "Points per game", y = "log(Salary + 1)") +
  theme_minimal()

p3_salary_vs_stocks <- ggplot(df, aes(x = stocks, y = log_salary)) +
  geom_point(alpha = 0.6) +
  geom_smooth(method = "lm", se = FALSE) +
  labs(title = "Log-transformed Salaries vs Defensive Stocks (Steals + Blocks)",
       x = "Stocks (steals + blocks)", 
       y = "log(Salary + 1)") +
  theme_minimal()

p4_salary_by_awards <- ggplot(df, aes(x = Awards, y = log_salary)) +
  geom_boxplot(fill = "grey85") +
  labs(title = "Log-transformed Salaries by Awards Category",
       x = "Awards Category", y = "log(Salary + 1)") +
  theme_minimal()

p6_salary_by_age <- ggplot(df, aes(x = Age, y = log_salary)) +
  geom_boxplot(fill = "lightgray") +
  labs(title = "Log-transformed Salaries by Age Group",
       x = "Age Group", y = "log(Salary + 1)") +
  theme_minimal()

# Combine in 3x2 grid
(p1 | p2_salary_vs_pts) / 
  (p3_salary_vs_stocks | p4_salary_by_awards) / 
  (p6_salary_by_age | plot_spacer())
```

### EDA Summary
Log-transformed salary shows a strong positive linear relationship with scoring: players above ~20 PPG consistently fall in the upper salary range on the log scale, while low-scoring players cluster near the lower end. Defensive performance, measured by stocks (steals + blocks), also has a positive association with salary, though the relationship is noticeably weaker and contains more variance, as shown by the scattered cloud in the plot.

Awards and experience further separate players into clear salary tiers. The boxplots show that players with even one award earn substantially more on the log scale, and those with multiple awards form the highest and most compressed salary group. Age groups display a similar trend: older, more experienced players (particularly those in the 27–31 and 32–34 brackets) show higher median log salaries, reflecting the market value of veteran players. Younger players (Age_1) display a much wider spread, consistent with rookie deals and early-career variability.
```{r, echo=FALSE, warning=FALSE,results=FALSE}
## Use this code chunk can be used to execute any functions or summaries 
## that will not be included in your output such as correlations or 5 number summaries

```

## Methods and Analysis

```{r, echo=FALSE, warning=FALSE,results=FALSE}
## This code chunk can be used to execute any functions or summaries that will not be included in your output

```

\textbf{Assessing Multicollinearity}

We began our analysis by assessing multicollinearity among predictors. From our EDA correlation heatmap, we observed potential overlap between PTS and other offensive statistics such as FTA and MP. We quantified these relationships using pairwise correlations and VIFs. If VIFs fell below standard thresholds (individual < 10, average < 3), we proceeded; otherwise, we used variable screening and stepwise regression to identify a reduced subset of predictors. After selecting a more stable set of variables, we reassessed multicollinearity before model building.

\textbf{Building the Model}

We will begin building our model by estimating our model parameters, starting with only our quantitative predictors and a quantitative interaction term that we believe may contribute to the model. Our initial model using quantitative predictors is as follows: 

\[
\begin{aligned}
\text{Salary} &= \beta_0 + \beta_1 MP + \beta_2 PTS + \beta_3 PFG\_\%TS + \beta_4 FTA + \beta_5 TRB \\
              &\quad + \beta_6 AST + \beta_7 \text{Stocks} + \beta_8 \text{Value} + \beta_9 (PTS \times FTA) \\
\end{aligned}
\]

We estimated this model with lm() and evaluated overall utility using a Global F-Test. Significant predictors—including the interaction—were identified through individual t-tests. Non-significant predictors were removed, and the updated model was rechecked with another Global F-Test.

Next, we incorporated qualitative predictors and one interaction (Awards × Age). We again performed a Global F-Test, followed by t-tests for the interaction and a Nested F-Test for the Awards factor. Only significant categorical effects were retained. No quantitative × qualitative interactions were considered. Once the final set of predictors was selected, we confirmed model adequacy with a concluding Global F-Test.

\textbf{Assessing the Model (Including Cross Validation)}

After finalizing our model through variable testing, we conducted a holistic assessment to understand its strengths and limitations. We evaluated metrics such as \(R^2\), Adjusted \(R^2\), and \(\sqrt{MSE}\), and we interpreted confidence and prediction intervals to assess practical performance.

We also incorporated cross-validation to evaluate model reliability. Cross-validation allowed us to check for overfitting or underfitting by training the model on most of the data and testing it on the remainder. Using the Validation Set Approach in R, we randomly split the dataset into 80% training and 20% testing, then evaluated the resulting models using \(\sqrt{MSE}\) and \(R^2\). This process helped determine whether the model generalized well to new data or required further refinement.

\textbf{Checking Model Assumptions}

We evaluated model assumptions using residual diagnostics. Residual vs. fitted plots, QQ plots, histograms, and lack-of-fit assessments enabled us to check constant variance, normality, independence, and overall fit. We then examined outliers and influential points through Cook’s Distance, leverage, Studentized Residuals, and Deleted Studentized Residuals. If any observations exerted undue influence, we considered removing them to improve model integrity.

\newpage

## Results

\textbf{Final Model}

The final model for predicting NBA player average salary (in millions) is:
\[
\begin{aligned}
\text{Salary} &= \beta_0 + \beta_1 MP + \beta_2 PTS + \beta_3 TRB + \beta_4 AST \\
              &\quad + \beta_5 awards_1 + \beta_6 awards_{2plus} + \beta_7 \text{Age 22-26} \\ 
              &\quad + \beta_8 \text{Age 27-31}  + \beta_9 \text{Age 32-34}+ \beta_{10} (Pos_{PF}) \\
              &\quad + \beta_{11} (Pos_{PG}) + \beta_{12} (Pos_{SF}) + \beta_{13} (Pos_{SG})
\end{aligned}
\]

\textbf{Model Development}

Initial VIF analysis showed severe multicollinearity in the interaction term, so it was removed. Stepwise selection identified six predictors, but t-tests reduced the quantitative model to MP, PTS, TRB, and AST. ANOVA F-tests indicated that adding qualitative predictors (Awards, Age, Position) significantly improved model fit (all \(p < 0.01\)).

\textbf{Model Performance}

The final model achieved an adjusted \(R^2 = 0.7681\), explaining 76.8% of salary variation, with a highly significant overall F-statistic (\(F = 75.39\), \(p < 2.2e{-16}\)). The residual standard error was \$7.832M. Five-fold cross-validation produced RMSE = \$8.052M and \(R^2 = 0.761\), confirming strong out-of-sample performance.

\textbf{Predictor Significance}

Points per game was the strongest predictor (\(\beta = 1.453\), \(p < 2e{-16}\)), and assists were also significant (\(\beta = 1.545\), \(p = 0.00089\)). Minutes played and rebounds were not significant in the full model.
Awards showed large premiums: one award added \$4.36M (\(p = 0.0544\)), and two or more added \$11.83M (\(p < 2.8e{-06}\)). Players aged 27–31 earned about \$4.19M more than the oldest group (\(p = 0.0537\)).
Position also mattered: point guards earned \$4.67M less (\(p = 0.0472\)), shooting guards \$5.24M less (\(p = 0.00865\)), and small forwards trended lower (\(\beta = -3.38\), \(p = 0.0667\)) relative to power forwards.

\textbf{Diagnostics}

Residual analysis identified observations 86 and 154 as influential points with high leverage and large studentized residuals (exceeding ±2). These observations were flagged for removal to ensure robust parameter estimates.

## Conclusions

Our final multiple linear regression model explained approximately 76.8% of the variation in NBA player salary, indicating strong predictive usefulness. The most influential quantitative predictors were points per game and assists, both of which showed large and statistically significant positive effects on salary. Award recognition and age group also contributed meaningfully, with players earning one award receiving an estimated $4.36M salary increase and players with two or more awards receiving nearly $12M more than otherwise similar players. Mid-career players (ages 27–31) earned significantly higher salaries than the oldest age group, aligning with typical NBA performance peaks.

\textbf{Prediction Equation (in millions)}
\[
\begin{aligned}
\widehat{\text{Salary}} =\;& 
\beta_0 
+ \beta_1 MP 
+ \beta_2 PTS 
+ \beta_3 TRB 
+ \beta_4 AST \\
&+ \beta_5(\text{awards}_1)
+ \beta_6(\text{awards}_{2+}) \\
&+ \beta_7(\text{Age}_{22\text{–}26})
+ \beta_8(\text{Age}_{27\text{–}31}) \\
&+ \beta_9(\text{Age}_{32\text{–}34}) \\
&+ \beta_{10}(\text{Pos}_{PF})
+ \beta_{11}(\text{Pos}_{PG}) \\
&+ \beta_{12}(\text{Pos}_{SF})
+ \beta_{13}(\text{Pos}_{SG})
\end{aligned}
\]


\textbf{Example Prediction}

For a player who averages **24 PTS**, **6 AST**, **7 TRB**, plays **33 minutes**, has **one award**, and is in the **27–31 age group**, the model predicts a salary in the approximate range of **\$30–\$40 million**, depending on position category. This demonstrates that the model produces intuitive and practically meaningful estimates based on real performance indicators.

\textbf{Future Improvements}

Although the model performed well, several limitations remained. Two influential outliers (observations 86 and 154) may have affected parameter estimates, and salary is influenced by factors not captured in our dataset—such as contract timing, injuries, popularity, or CBA constraints. Including these variables or using mixed-effects approaches could improve realism. Because NBA salaries are highly right-skewed, future work could also explore log-salary models, nonlinear effects, or regularization methods like ridge regression to address remaining variance and multicollinearity. Overall, the model offered a solid foundation for understanding salary drivers while leaving room for deeper economic and behavioral extensions.
\newpage

## Appendix A: Data Dictionary
| Variable Name | Abbreviated Name | Description |
|:-------------:|:----------------:|:-----------:|
|Games|G|This represents the games played by each respective player.|
|Minutes Played|MP|This represents the minutes played by each respective player in the overall season.|
|Points Scored|PTS|This represents the total points scored by each respective player.|
|Field Goal Percentage|FG_PCT|This represents the percentage of field goals scored by each respective player.|
|Free Throw Attempts|FTA|This represents the free throw attempts made by each respective player.|
|Total Rebounds|TRB|This represents the total rebounds made by each respective player.|
|Total Assists|AST|This represents the total assits by each respective player.|
|Steals and Blocks Combined|Stocks|This represents the steals and  blocks achieved by each respective player.|
|Franchise Value|Value|This represents the franchise value of the team of each respective player.|
|Position|Pos|This represents the position of the player. The position can either be center (reference), power forward (pf), point guard (pg), small forward (sf), or shooting guard (sg).|
|Awards|awards|This signifies the number of awards a player has won, sorted into three groups: 0 awards (reference), 1 award, or at least 2 awards.|
|Age|Age|This represents the player's age, sorted into 4 groups: 22-26, 27-31, 32-24, and 35+ (reference).|

\newpage

## Appendix B: Data Rows

```{r, echo=FALSE}
# Use head() function to output first several rows
head(df)
```

\newpage

## Appendix C: Final Model Output and Plots

```{r, echo=FALSE, warning=FALSE,results=FALSE}
## This code chunk can be used to execute any functions or summaries that will not be included in your output
```

```{r, echo=FALSE}
## Use this section to output the summary of your final model
## Include the relevant plots from assumptions and your additional techniques
## This should NOT be a dump of all of your plots and outputs.
## Refer to the Rmarkdown guide for sizing information on your plots
final_model <- lm(avg_salary_millions ~ MP + PTS + TRB + AST + Pos_PF + 
    Pos_PG + Pos_SF + Pos_SG, data = df)
summary(final_model)
```

\newpage

## Appendix D: References

### Background

Berri, D. J., & Schmidt, M. B. (2006). The wages of wins. Stanford University Press.

Kubatko, J., Oliver, D., Pelton, K., & Rosenbaum, D. T. (2007).
A starting point for analyzing basketball statistics. Journal of Quantitative Analysis in Sports, 3(3).
https://doi.org/10.2202/1559-0410.1070

NBA. (2023).
Collective Bargaining Agreement: Summary of principal terms.
https://nbpa.com/cba

Simmons, R., & Berri, D. J. (2011). Mixing the princes and the paupers: Pay and performance in the NBA. Labour Economics, 18(3), 381–388. https://doi.org/10.1016/j.labeco.2010.12.003

Staw, B. M., & Hoang, H. (1995).
Sunk costs in the NBA: Why draft order affects playing time and survival in professional basketball. Administrative Science Quarterly, 40(3), 474–494.
https://doi.org/10.2307/2393794

Stiroh, K. (2007). Playing for keeps: Pay and performance in the NBA. Economic Inquiry, 45(1), 145–161. https://doi.org/10.1111/j.1465-7295.2006.00002.x

### Data Sources

Statista (NBA franchise values):
Statista. (2010). Franchise value of National Basketball Association teams in 2010. https://www.statista.com/statistics/193696/franchise-value-of-national-basketball-association-teams-in-2010/

Basketball-Reference (Player contracts):
Basketball-Reference.com. (n.d.). NBA player contracts. https://www.basketball-reference.com/contracts/players.html

Basketball-Reference (2025 Per-game stats):
Basketball-Reference.com. (2025). NBA per game statistics: 2024–25 season. https://www.basketball-reference.com/leagues/NBA_2025_per_game.html

### Additional Help
