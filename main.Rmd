---
title: "main"
output: pdf_document
date: "2025-11-18"
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

```{r, echo=FALSE, comment=NA}
# push test
```


```{r}
nba_merged
```


Code to adjust awards won into qualitative variables:
```{r, comment=NA}
library(stringr)
library(dplyr)

# --- Step 1: Function to count award wins ---
count_award_wins <- function(award_string) {
  if (is.na(award_string) || award_string == "") return(0L)
  
  # 1) Hyphen-based awards (e.g., MVP-1)
  placements_hyphen <- str_extract_all(award_string, "(?<=-)\\d+")[[1]]
  hyphen_wins <- sum(as.integer(placements_hyphen) == 1, na.rm = TRUE)
  
  # 2) All-NBA teams (NBA1, NBA2, NBA3) â€” all count as wins
  nba_awards <- str_extract_all(award_string, "NBA[1-3]")[[1]]
  nba_wins <- length(nba_awards)
  
  hyphen_wins + nba_wins
}

# --- Step 2: Run everything inside ONE mutate() to maintain order ---
nba_merged <- nba_merged %>%
  mutate(
    # first compute numeric wins
    n_awards_won = vapply(Awards, count_award_wins, integer(1)),
    
    # then create the factor
    awards_factor = case_when(
      n_awards_won == 0 ~ "0 awards won",
      n_awards_won == 1 ~ "1 award won",
      n_awards_won >  1 ~ "more than 1 award won"
    ),
    awards_factor = factor(
      awards_factor,
      levels = c("0 awards won", "1 award won", "more than 1 award won")
    ),
    
    # then create dummy variables
    awards_1     = ifelse(awards_factor == "1 award won", 1, 0),
    awards_2plus = ifelse(awards_factor == "more than 1 award won", 1, 0)
  )

nba_merged
```

```{r, comment=NA}
```